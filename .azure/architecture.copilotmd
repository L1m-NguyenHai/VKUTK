# Architecture Diagram

```mermaid
graph LR
%% Frontend Layer
subgraph "Frontend (Multi-Platform)"
    direction TB
    fe_desktop["`**Desktop App**
    (Tauri: Windows/Mac/Linux)`"]
    fe_mobile["`**Mobile App**
    (Tauri: Android)`"]
    fe_web["`**Web App**
    (React: Browser)`"]
end

%% Backend Layer
subgraph "Backend System (FastAPI)"
    direction TB
    fastapi["`**Main API Gateway**
    (FastAPI / Python)`"]

    subgraph "Modular Logic (Cogs)"
        cogs["`**Cogs / Plugins**
        (Chat, Scraper, Schedule, etc.)`"]
    end
end

%% External Integrations
subgraph "External Integrations"
    n8n["`**n8n**
    (Workflow Automation)`"]
    other_apis["`**Other APIs**
    (3rd Party Services)`"]
end

%% Database
subgraph "Storage"
    supabase["`**Supabase**
    (PostgreSQL)`"]
end

%% Relationships
fe_desktop --> |"REST API"| fastapi
fe_mobile --> |"REST API"| fastapi
fe_web --> |"REST API"| fastapi

fastapi <--> |"Load & Execute"| cogs

cogs --> |"Trigger Workflows"| n8n
cogs --> |"Fetch Data"| other_apis
cogs <--> |"Read/Write"| supabase
fastapi <--> |"Auth & User Data"| supabase
```

## Technology Stack & Architecture

### 1. Frontend (Multi-Platform)

The frontend is built as a unified codebase using **React** and **Vite**, deployed across multiple platforms:

- **Desktop (Windows/macOS/Linux)**: Wrapped using **Tauri** for native performance and system access.
- **Mobile (Android)**: Wrapped using **Tauri Mobile** capabilities.
- **Web**: Standard React SPA (Single Page Application) accessible via browser.

### 2. Backend (FastAPI + Cogs)

The backend is a **Python FastAPI** server designed with a modular architecture:

- **Main Gateway**: Handles HTTP requests, authentication, and routing.
- **Cogs (Modular Plugins)**: Business logic is split into independent "Cogs" (e.g., `ChatCog`, `ScraperCog`, `ScheduleCog`). This allows for easy extension and maintenance.
  - _Example_: The `ChatCog` might handle NLP tasks, while `ScraperCog` handles VKU portal interactions.

### 3. External Integrations

The backend extends its capabilities by connecting to external services:

- **n8n**: Used for complex workflow automation, background tasks, or connecting different services together without writing custom code for every integration.
- **Other APIs**: Integration with third-party services (e.g., AI models, weather, news) as needed by specific Cogs.

### 4. Database (Supabase)

- **Supabase (PostgreSQL)**: Acts as the primary data store for user profiles, schedules, scraped data, and application state.
